#!/usr/bin/env node
var main = require('../')
var program = require('commander')
var json = require('../package.json')

program.
  version(json.version).
  usage('[options] <message> <channel name>').
  option('-t, --token <token>', 'token to use, reads SLACK_TOKEN if provided').
  option('-s, --save-token', 'saves token for later use').
  parse(process.argv)

if (program.args.length === 0) {
  program.outputHelp()
  return
}

const message = program.args[0]
const channel = program.args[1]

main.send(message, channel, {
  token: program.token,
  saveToken: program.saveToken,
  removeToken: program.removeToken,
})
