#!/usr/bin/env node
var main = require('../')
var program = require('commander')
var json = require('../package.json')

program.
  version(json.version).
  usage('[options] <message>').
  option('-t, --token <token>', 'token to use').
  option('-s, --save-token', 'saves token for later use').
  option('-c, --channel-name <channel>', 'channel to post a message to').
  parse(process.argv)

if (program.args.length === 0) {
  program.outputHelp()
  return
}

main.send(program.args[0], {
  token: program.token,
  saveToken: program.saveToken,
  removeToken: program.removeToken,
  channelName: program.channelName
})
